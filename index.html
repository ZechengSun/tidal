<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ffffff">
    <meta name="description" content="æ¯æ—¥å†¥æƒ³ - ç®€å•ã€è½»é‡ã€æœ‰æ•ˆçš„å†¥æƒ³å·¥å…·ï¼Œå¸®åŠ©æ‚¨å‡è½»å‹åŠ›ï¼Œæå‡ä¸“æ³¨åŠ›">
    <meta name="keywords" content="å†¥æƒ³,å‡å‹,ä¸“æ³¨åŠ›,å¿ƒç†å¥åº·,æ¯æ—¥å†¥æƒ³">
    
    <!-- æ€§èƒ½ä¼˜åŒ– -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="styles.css" as="style">
    
    <!-- é¢„è¿æ¥å…³é”®åŸŸå -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <title>æ¯æ—¥å†¥æƒ³ - é‡Šæ”¾å‹åŠ›ï¼Œæå‡å¥åº·</title>
    
    <!-- æ ·å¼è¡¨ -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- PWA ç›¸å…³ -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="favicon/apple-touch-icon.png">
    
    <!-- å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- ç‰ˆæœ¬æ§åˆ¶å‚æ•°-ç¡®ä¿æµè§ˆå™¨åŠ è½½æœ€æ–°èµ„æº -->
    <meta name="app-version" content="1.1.0">
    
    <!-- PWA æ”¯æŒ -->
    <link rel="manifest" href="manifest.json?v=1.1.0">
    
    <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
<link rel="shortcut icon" href="favicon/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
<meta name="apple-mobile-web-app-title" content="MyWebSite" />
<link rel="manifest" href="favicon/site.webmanifest" />

    <!-- ç»“æ„åŒ–æ•°æ® -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "æ¯æ—¥å†¥æƒ³",
        "description": "ç®€å•ã€è½»é‡ã€æœ‰æ•ˆçš„å†¥æƒ³å·¥å…·ï¼Œå¸®åŠ©æ‚¨å‡è½»å‹åŠ›ï¼Œæå‡ä¸“æ³¨åŠ›",
        "url": "https://your-domain.com",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "CNY"
        },
        "featureList": [
            "è¶…è½»é‡è®¾è®¡",
            "æ— éœ€å®‰è£…",
            "è·¨å¹³å°æ”¯æŒ",
            "æ•°æ®éšç§ä¿æŠ¤"
        ]
    }
    </script>
    
    <!-- å†…è”å…³é”®CSS - æé«˜é¦–å±åŠ è½½é€Ÿåº¦ -->
    <style>
        /* å…³é”®æ¸²æŸ“è·¯å¾„CSS */
        body { 
            margin: 0; 
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f7fa; 
            color: #34495e;
        }
        .page-container { 
            width: 100vw; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
        }
        .meditation-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .circle-animation {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 0 auto 25px;
            background: rgba(52, 152, 219, 0.2);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        footer {
            position: relative;
            z-index: 1;
            margin-bottom: 8px;
            color: var(--light-text);
            font-size: 0.85rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="page-container">
        <!-- å¯¼èˆªæ  -->
        <nav class="nav-bar" role="navigation" aria-label="ä¸»å¯¼èˆª">
            <div class="nav-item active" data-page="meditation-page" role="button" tabindex="0" aria-label="å†¥æƒ³é¡µé¢">å†¥æƒ³</div>
            <div class="nav-item" data-page="stats-page" role="button" tabindex="0" aria-label="ç»Ÿè®¡é¡µé¢">ç»Ÿè®¡</div>
            <div class="nav-item" data-page="benefits-page" role="button" tabindex="0" aria-label="å¥½å¤„é¡µé¢">å¥½å¤„</div>
        </nav>

        <!-- è¯­è¨€é€‰æ‹©å™¨ -->
        <div class="language-bar">
            <div class="language-selector">
                <label for="languageSelect" class="visually-hidden">é€‰æ‹©è¯­è¨€</label>
                <select id="languageSelect" aria-label="è¯­è¨€é€‰æ‹©">
                    <option value="zh">ç®€ä½“ä¸­æ–‡</option>
                    <option value="en">English</option>
                    <option value="ja">æ—¥æœ¬èª</option>
                    <option value="ko">í•œêµ­ì–´</option>
                </select>
            </div>
        </div>

        <!-- é¡µé¢å†…å®¹ -->
        <main class="content">
            <!-- ç§»é™¤è§†é¢‘èƒŒæ™¯ -->
            
            <!-- å†¥æƒ³é¡µé¢ -->
            <section class="page active" id="page-meditation" aria-labelledby="meditation-title">
                <header>
                    <h1 id="meditation-title">æ¯æ—¥å†¥æƒ³</h1>
                    <p>ç®€å•ã€è½»é‡ã€æœ‰æ•ˆçš„å†¥æƒ³å·¥å…·</p>
                </header>

                <button id="fullscreenToggle" class="fullscreen-toggle" aria-label="å…¨å±æ¨¡å¼">â›¶</button>
                
                <!-- ä¿®æ”¹å‘¼å¸åœ†åœˆç»“æ„ï¼Œå°†æ–‡å­—æ”¾å…¥åœ†åœˆå†… -->
                <div class="circle-animation" id="breathCircle" aria-live="polite">
                    <div class="breath-text" id="breathText">å‡†å¤‡å¼€å§‹</div>
                </div>
                
                <div class="timer" id="timer" aria-live="polite">00:00</div>
                
                <div class="controls">
                    <button id="startPauseBtn" class="btn primary" aria-label="å¼€å§‹å†¥æƒ³"><div class="start-icon"></div></button>
                    <button id="resetBtn" class="btn" disabled style="display:none;" aria-label="é‡ç½®">é‡ç½®</button>
                    <button id="toggleMusicBtn" class="btn" aria-label="éŸ³ä¹å¼€å…³">
                        <div class="music-icon">ğŸµ</div>
                    </button>
                </div>
                
                <div class="session-settings">
                    <label for="sessionTime">å†¥æƒ³æ—¶é•¿ (<span id="minutesText">åˆ†é’Ÿ</span>):</label>
                    <select id="sessionTime" aria-label="é€‰æ‹©å†¥æƒ³æ—¶é•¿">
                        <option value="1">1</option>
                        <option value="5">5</option>
                        <option value="10" selected>10</option>
                        <option value="15">15</option>
                        <option value="20">20</option>
                        <option value="30">30</option>
                    </select>
                </div>
                
                <!-- ä¹¦ç­¾å’Œæ·»åŠ åˆ°ä¸»å±å¹•æç¤º -->
                <div class="bookmark-add-home-reminder" id="bookmarkAddHomeReminder" aria-labelledby="reminder-title">
                    <div class="reminder-icon" aria-hidden="true">âœ¨</div>
                    <div class="reminder-content">
                        <p id="reminder-title">å°†å†¥æƒ³å·¥å…·æ·»åŠ åˆ°æ‚¨çš„è®¾å¤‡ï¼Œéšæ—¶ä½¿ç”¨ï¼š</p>
                        <div class="action-buttons">
                            <button id="add-to-bookmark" class="action-button" aria-label="æ·»åŠ åˆ°æ”¶è—å¤¹">
                                <span class="icon" aria-hidden="true">ğŸ”–</span>
                                <span class="action-text" data-lang="addToBookmark">æ·»åŠ åˆ°æ”¶è—å¤¹</span>
                            </button>
                            <button id="add-to-home" class="action-button" aria-label="æ·»åŠ åˆ°ä¸»å±å¹•">
                                <span class="icon" aria-hidden="true">ğŸ“±</span>
                                <span class="action-text" data-lang="addToHome">æ·»åŠ åˆ°ä¸»å±å¹•</span>
                            </button>
                        </div>
                    </div>
                    <button id="closeAddHomeReminderBtn" class="reminder-close" aria-label="å…³é—­æç¤º">Ã—</button>
                </div>
                
                <!-- éŸ³é¢‘å…ƒç´  -->
                <audio id="meditationMusic" loop preload="none">
                    <source src="sounds/meditation-music.mp3" type="audio/mpeg">
                    <p>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚</p>
                </audio>
            </section>

            <!-- ç»Ÿè®¡é¡µé¢ -->
            <section class="page" id="page-stats" aria-labelledby="stats-title">
                <header>
                    <h1 id="stats-title">å†¥æƒ³ç»Ÿè®¡</h1>
                    <p>è·Ÿè¸ªæ‚¨çš„å†¥æƒ³è®°å½•</p>
                </header>

                <div class="stats-container" id="statsContainer">
                    <div class="stats" role="list">
                        <div class="stat-item" role="listitem">
                            <span class="stat-value" id="totalSessions">0</span>
                            <span class="stat-label">æ€»å†¥æƒ³æ¬¡æ•°</span>
                        </div>
                        <div class="stat-item" role="listitem">
                            <span class="stat-value" id="totalMinutes">0</span>
                            <span class="stat-label">æ€»å†¥æƒ³åˆ†é’Ÿ</span>
                        </div>
                        <div class="stat-item" role="listitem">
                            <span class="stat-value" id="currentStreak">0</span>
                            <span class="stat-label">è¿ç»­å¤©æ•°</span>
                        </div>
                    </div>
                    <div class="bookmark-reminder hidden" id="bookmarkReminder" aria-live="polite">
                        <p>ğŸ’¡ å°æç¤º: å°†æœ¬é¡µæ·»åŠ åˆ°ä¹¦ç­¾ï¼Œä¸‹æ¬¡å¯ç›´æ¥è®¿é—®æ‚¨çš„ä¸ªäººå†¥æƒ³ç©ºé—´</p>
                        <button id="closeReminderBtn" class="btn small">æ˜ç™½äº†</button>
                    </div>
                </div>
            </section>

            <!-- ç›Šå¤„é¡µé¢ -->
            <section class="page" id="page-benefits" aria-labelledby="benefits-title">
                <header>
                    <h1 id="benefits-title">å†¥æƒ³å¥½å¤„</h1>
                    <p>äº†è§£å†¥æƒ³ä¸ºä½•æœ‰æ•ˆ</p>
                </header>

                <section class="benefits">
                    <div class="benefits-grid">
                        <div class="benefit-item">
                            <h3>å‡è½»å‹åŠ›</h3>
                            <p>ç ”ç©¶è¡¨æ˜ï¼Œæ¯å¤©å†¥æƒ³10åˆ†é’Ÿå¯ä»¥æ˜¾è‘—é™ä½ç„¦è™‘å’Œå‹åŠ›æ°´å¹³</p>
                        </div>
                        <div class="benefit-item">
                            <h3>æ”¹å–„ç¡çœ </h3>
                            <p>å®šæœŸå†¥æƒ³æœ‰åŠ©äºæ”¹å–„ç¡çœ è´¨é‡ï¼Œç¼“è§£å¤±çœ é—®é¢˜</p>
                        </div>
                        <div class="benefit-item">
                            <h3>æé«˜ä¸“æ³¨åŠ›</h3>
                            <p>å†¥æƒ³è®­ç»ƒå¯ä»¥å¢å¼ºæ³¨æ„åŠ›å’Œé›†ä¸­åŠ›ï¼Œæé«˜å·¥ä½œæ•ˆç‡</p>
                        </div>
                        <div class="benefit-item">
                            <h3>æƒ…ç»ªç®¡ç†</h3>
                            <p>å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œç®¡ç†è‡ªå·±çš„æƒ…ç»ªååº”</p>
                        </div>
                    </div>
                </section>

                <section class="why-use">
                    <h2>ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬çš„ç½‘é¡µå†¥æƒ³å·¥å…·ï¼Ÿ</h2>
                    <div class="features">
                        <div class="feature">
                            <h3>è¶…è½»é‡</h3>
                            <p>ä»…éœ€1KBä¹¦ç­¾ç©ºé—´ï¼Œæ¯”åŠ¨è¾„å‡ åå…†çš„AppèŠ‚çœ99.9%çš„è®¾å¤‡ç©ºé—´</p>
                        </div>
                        <div class="feature">
                            <h3>æ— éœ€å®‰è£…</h3>
                            <p>ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œæ— éœ€ä¸‹è½½åº”ç”¨ï¼Œæ— éœ€æ³¨å†Œè´¦å·</p>
                        </div>
                        <div class="feature">
                            <h3>è·¨å¹³å°</h3>
                            <p>åœ¨ä»»ä½•è®¾å¤‡ä¸Šéƒ½èƒ½ä½¿ç”¨ - æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘å‡å¯è®¿é—®</p>
                        </div>
                        <div class="feature">
                            <h3>æ•°æ®éšç§</h3>
                            <p>æ‚¨çš„å†¥æƒ³æ•°æ®ä»…ä¿å­˜åœ¨æ‚¨çš„è®¾å¤‡ä¸Šï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨</p>
                        </div>
                    </div>
                </section>
            </section>
        </main>

        <!-- é¡µè„š -->
        <footer id="footerText">Â© 2024 æ¯æ—¥å†¥æƒ³ - è½»æ¾å¼€å§‹å†¥æƒ³ä¹‹æ—…</footer>
    </div>

    <!-- é”™è¯¯æ¶ˆæ¯å®¹å™¨ -->
    <div id="error-container" class="error-container hidden" role="alert" aria-live="assertive"></div>

    <!-- Service Workeræ³¨å†Œ -->
    <script>
        // æ£€æŸ¥æ˜¯å¦æ”¯æŒService Worker
        if ('serviceWorker' in navigator) {
            // æ£€æŸ¥æ˜¯å¦åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒ
            const isLocalhost = window.location.hostname === 'localhost' || 
                              window.location.hostname === '127.0.0.1';
            
            // æ£€æŸ¥æ˜¯å¦åœ¨HTTPSç¯å¢ƒæˆ–æœ¬åœ°å¼€å‘ç¯å¢ƒ
            if (window.location.protocol === 'https:' || isLocalhost) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('./sw.js?v=1.1.0')
                        .then(registration => {
                            console.log('Service Workeræ³¨å†ŒæˆåŠŸ:', registration.scope);
                        })
                        .catch(error => {
                            console.error('Service Workeræ³¨å†Œå¤±è´¥:', error);
                            // æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æ¶ˆæ¯
                            const errorContainer = document.getElementById('error-container');
                            if (errorContainer) {
                                errorContainer.textContent = 'ç¦»çº¿åŠŸèƒ½ä¸å¯ç”¨ï¼Œè¯·ç¡®ä¿ä½¿ç”¨HTTPSæˆ–æœ¬åœ°å¼€å‘æœåŠ¡å™¨ã€‚';
                                errorContainer.classList.remove('hidden');
                            }
                        });
                });
            } else {
                console.warn('Service Workeréœ€è¦HTTPSæˆ–localhostç¯å¢ƒ');
            }
        }
        
        // æ›´æ–°é¡µè„šå¹´ä»½
        const footerText = document.getElementById('footerText');
        if (footerText) {
            footerText.textContent = `Â© ${new Date().getFullYear()} æ¯æ—¥å†¥æƒ³ - è½»æ¾å¼€å§‹å†¥æƒ³ä¹‹æ—…`;
        }
    </script>
    
    <!-- æ·»åŠ ç²’å­ç³»ç»Ÿè„šæœ¬ -->
    <script src="particles.js" defer></script>
    
    <!-- ä¸»è„šæœ¬å»¶è¿ŸåŠ è½½ -->
    <script src="script.js?v=1.1.0" defer></script>
</body>
</html> 